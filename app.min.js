function imageApp(){return{images:[],isDragging:!1,downloadFormat:"png",handlePaste(e){const t=(e.clipboardData||e.originalEvent.clipboardData).items;for(const e of t)"image"===e.type.indexOf(0)&&this.addImageFromFile(e.getAsFile())},handleFileSelect(e){const t=e.target.files;for(const e of t)e.type.startsWith("image/")&&this.addImageFromFile(e);e.target.value=""},handleDrop(e){const t=e.dataTransfer.files;for(const e of t)e.type.startsWith("image/")&&this.addImageFromFile(e)},addImageFromFile(e){const t=new FileReader;t.onload=t=>{this.images.push({src:t.target.result,file:e,name:e.name||`image_${Date.now()}.png`,size:e.size,type:e.type})},t.readAsDataURL(e)},downloadSingleImage(e,t){const a=document.createElement("canvas"),i=a.getContext("2d"),n=new Image;n.onload=()=>{a.width=n.width,a.height=n.height,i.drawImage(n,0,0);const s=this.generateFileName(e,t);a.toBlob(e=>{const t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=s,a.click(),setTimeout(()=>URL.revokeObjectURL(t),100)},`image/${this.downloadFormat}`)},n.src=e.src},generateFileName(e,t){let a="image";return e.name?(a=e.name.split("."),a.length>1&&a.pop(),a=a.join(".")):a=`image_${t+1}`,`${a}.${this.downloadFormat}`},formatFileSize(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB"},clearImages(){this.images=[]},downloadAllAsZip(){const e=new JSZip;let t=e.folder("images"),a=0;this.images.forEach((i,n)=>{const s=document.createElement("canvas"),r=s.getContext("2d"),o=new Image;o.onload=()=>{s.width=o.width,s.height=o.height,r.drawImage(o,0,0),s.toBlob(i=>{const s=new FileReader;s.onload=s=>{const r=this.generateFileName(i,n);t.file(r,s.target.result,{binary:!0}),++a===this.images.length&&e.generateAsync({type:"blob"}).then(e=>{const t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=`images_${(new Date).toISOString().slice(0,10)}.zip`,a.click(),setTimeout(()=>URL.revokeObjectURL(t),100)})},s.readAsArrayBuffer(i)},`image/${this.downloadFormat}`)},o.src=i.src})}}} 